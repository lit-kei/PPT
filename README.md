# PPTAI
このプロジェクトは，ぷよぷよ初心者が簡単に大連鎖を構築し，ぷよぷよ本来の楽しさを味わってもらうためのものです。  
ぷよぷよのフィールドシミュレーションを高速に処理するC++プログラムで，最適化を行ったため大量の手順を効率的に検証できます。
***
## 概要
-  **GTR** ， **メリ土台** ， **Fron積み** などのテンプレートを基に連鎖を構築
-  **22並列スレッド** による高速な意思決定・評価処理
- `Fall`関数によるぷよの落下計算を正確にシミュレート
- 高速なビット演算によるフィールド表現（`unsigned __int64` × 6列）
## 依存関係
- C++17 以上（`std::async`，`std::deque`，構造化バインディングなどを使用）
- Windows環境（WinAPIに依存したコードであるため）
- コンパイラ: Visual Studio 2022 など



## 最善手の探索法
最善手の探索には以下の関数を使い分けています。
- ### 1. `MakeTemplate`関数
    -  **GTR** ,  **Fron積み** などのメジャーな土台のほかに **だぁ積み** ， **ペルシャ式** など，計28種類のテンプレートから最善手を決定
    - 現在の盤面から派生できる土台を探索し、それに基づいた結果を表示
    - ビームサーチを用いて計算時間を大幅短縮
- ### 2. `Search`関数
    - テンプレートに依存しない自由な連鎖の構築を実現する関数
    - テンプレートから外れたり，テンプレートが完成したりするとこの関数に切り替わる
    - ビームサーチと **22スレッドの並列処理** を用いて計算時間を大幅短縮
- ### 3. `Fire`関数
    - 連鎖を構築するためのものではなく，発火の最善手を見つけるための関数
    - Union-Findによる高速連鎖シミュレートを実現
    - わずか **XXXXミリ秒** で最善手を計算


***
## 参考文献
- 『落下型パズルゲームの定石形配置法とぷよぷよへの適用』，2012.11，富沢大輔，https://hdl.handle.net/10119/12030
- 『ぷよぷよAIの新しい探索法』，2015.8，Takuya Doki，https://www.slideshare.net/slideshow/ai-52214222/52214222
- 『Wataame6 誕生』，2022.12，雨安，https://www.youtube.com/watch?v=Bh2ccOU9tXM&t=122s